# تنظيم الكود - متجر الزيتون الإلكتروني

## نظرة عامة
تم تنظيم جميع ملفات الكود وإضافة تعليقات واضحة لتسهيل الفهم والصيانة.

## هيكل المشروع

### 1. الملفات الرئيسية
```
├── server.js          # خادم Node.js الرئيسي
├── package.json       # إعدادات المشروع والتبعيات
├── public/            # الملفات العامة
│   ├── index.html     # الصفحة الرئيسية
│   ├── admin.html     # لوحة الإدارة
│   ├── script.js      # JavaScript الرئيسي
│   └── styles.css     # ملف التنسيق
└── README.md          # دليل المشروع
```

## تفاصيل التنظيم

### server.js - الخادم الرئيسي
تم تنظيم الملف إلى الأقسام التالية:

#### 1. إعدادات الخادم والمكتبات
- تحميل المكتبات المطلوبة
- إعداد Express
- إعداد CORS

#### 2. الوسطاء (Middleware)
- معالجة JSON
- الملفات الثابتة
- إعدادات الأمان

#### 3. إعداد قاعدة البيانات
- الاتصال بـ SQLite
- إنشاء الجداول:
  - `users` - المستخدمين
  - `products` - المنتجات
  - `cart` - السلة
  - `orders` - الطلبات
  - `order_items` - عناصر الطلبات
  - `reviews` - المراجعات

#### 4. إعدادات البريد الإلكتروني
- إعداد Nodemailer
- قوالب الرسائل

#### 5. وظائف قاعدة البيانات
- تهيئة قاعدة البيانات
- إضافة الأعمدة
- إضافة المنتجات الافتراضية

#### 6. بيانات المنتجات الافتراضية
- 24 منتج متنوع
- معلومات كاملة لكل منتج

#### 7. وظائف البريد الإلكتروني
- إرسال رسائل الطلبات
- قوالب HTML للرسائل

#### 8. وسطاء المصادقة
- التحقق من JWT
- حماية المسارات

#### 9. APIs المصادقة
- تسجيل المستخدمين الجدد
- تسجيل الدخول

#### 10. APIs إدارة المنتجات
- جلب جميع المنتجات
- جلب منتج واحد

#### 11. APIs السلة
- إضافة للسلة
- عرض السلة
- تحديث الكمية
- حذف من السلة

#### 12. APIs معالجة الطلبات
- إرسال رسائل الطلبات
- إنشاء طلبات للمستخدمين المسجلين
- إنشاء طلبات للضيوف
- جلب طلبات المستخدم
- البحث في طلبات الضيوف

#### 13. APIs الإدارة
- جلب جميع الطلبات
- تحديث حالة الطلب
- حذف الطلبات
- إحصائيات الإدارة

#### 14. APIs المراجعات
- إضافة مراجعة جديدة
- جلب المراجعات المعتمدة
- إدارة المراجعات

#### 15. المسارات
- صفحة الإدارة
- الصفحة الرئيسية

#### 16. بدء الخادم
- تشغيل الخادم على المنفذ 5000
- إغلاق قاعدة البيانات بأمان

### script.js - JavaScript الرئيسي
تم تنظيم الملف إلى الأقسام التالية:

#### 1. المتغيرات العامة
- متغيرات التطبيق الأساسية
- إعدادات API

#### 2. تهيئة التطبيق
- تحميل البيانات عند بدء التطبيق
- إعداد مستمعي الأحداث

#### 3. إدارة التنقل
- إعداد التنقل بين الصفحات
- إدارة الروابط النشطة

#### 4. إدارة السلة
- فتح وإغلاق السلة
- تحديث عرض السلة

#### 5. إدارة المصادقة
- نوافذ تسجيل الدخول والتسجيل
- التبديل بين الأوضاع

#### 6. إعداد مستمعي الأحداث
- ربط الأحداث بالعناصر
- معالجة النماذج

#### 7. إدارة المنتجات
- تحميل وعرض المنتجات
- تصفية المنتجات
- إنشاء بطاقات المنتجات
- أيقونات SVG للمنتجات

#### 8. إدارة الطلبات
- إرسال الطلبات عبر WhatsApp
- معالجة الدفع
- عرض الطلبات

#### 9. إدارة المراجعات
- نظام التقييم بالنجوم
- إرسال المراجعات
- عرض المراجعات

#### 10. الوظائف المساعدة
- عرض الرسائل
- تحديث العرض
- وظائف مساعدة أخرى

### styles.css - ملف التنسيق
تم تنظيم الملف إلى الأقسام التالية:

#### 1. الإعدادات العامة
- إعادة تعيين CSS
- الخطوط الأساسية

#### 2. الخلفية المتحركة
- الأشكال العائمة
- التأثيرات البصرية

#### 3. شريط التنقل
- تصميم القائمة
- الأزرار والروابط

#### 4. الحاويات الرئيسية
- تخطيط الصفحات
- المساحات والهوامش

#### 5. القسم الرئيسي
- العناوين والنصوص
- الأزرار الرئيسية

#### 6. بطاقات الميزات
- تصميم البطاقات
- الأيقونات والنصوص

#### 7. قسم "من نحن"
- تخطيط المحتوى
- الإحصائيات

#### 8. قسم المنتجات
- شبكة المنتجات
- أزرار التصفية

#### 9. قسم الطلبات
- عرض الطلبات
- حالات الطلبات

#### 10. قسم التواصل
- معلومات الاتصال
- الروابط الاجتماعية

#### 11. قسم المراجعات
- بطاقات المراجعات
- نظام النجوم

#### 12. النوافذ المنبثقة
- نوافذ المنتجات
- نوافذ المصادقة

#### 13. السلة الجانبية
- تصميم السلة
- عناصر السلة

#### 14. النماذج
- تصميم الحقول
- الأزرار

#### 15. تقييم النجوم
- نظام التقييم التفاعلي

#### 16. الرسائل
- رسائل النجاح والخطأ

#### 17. الرسوم المتحركة
- تأثيرات التحميل
- الانتقالات

#### 18. التصميم المتجاوب
- دعم الهواتف المحمولة
- تخطيطات مختلفة

### index.html - الصفحة الرئيسية
تحتوي على:
- هيكل HTML كامل
- جميع الصفحات والنوافذ
- النماذج والعناصر التفاعلية

### admin.html - لوحة الإدارة
تحتوي على:
- واجهة إدارة الطلبات
- إدارة المراجعات
- الإحصائيات

## الميزات المنجزة

### ✅ الوظائف الأساسية
- [x] عرض المنتجات مع التصفية
- [x] نظام السلة الكامل
- [x] معالجة الطلبات
- [x] تسجيل المستخدمين
- [x] نظام المراجعات
- [x] لوحة الإدارة
- [x] إرسال الطلبات عبر WhatsApp
- [x] إرسال رسائل البريد الإلكتروني

### ✅ التحسينات
- [x] تنظيم الكود بالكامل
- [x] إضافة تعليقات شاملة
- [x] تحسين الأداء
- [x] تصميم متجاوب
- [x] أيقونات SVG مخصصة
- [x] نظام تقييم تفاعلي

## التقنيات المستخدمة

### الخادم (Backend)
- **Node.js** - بيئة تشغيل JavaScript
- **Express.js** - إطار عمل الويب
- **SQLite** - قاعدة البيانات
- **JWT** - المصادقة
- **Nodemailer** - إرسال الرسائل
- **bcrypt** - تشفير كلمات المرور

### العميل (Frontend)
- **HTML5** - هيكل الصفحات
- **CSS3** - التنسيق والتصميم
- **JavaScript** - التفاعل والوظائف
- **Font Awesome** - الأيقونات
- **SVG** - الرسوم المتجهة

## الأمان
- تشفير كلمات المرور
- حماية المسارات بـ JWT
- تنظيف البيانات المدخلة
- حماية من CORS

## الأداء
- ضغط الملفات
- تحسين الاستعلامات
- تحميل البيانات بشكل غير متزامن
- تخزين مؤقت للبيانات

## التوافق
- متوافق مع جميع المتصفحات الحديثة
- تصميم متجاوب للهواتف المحمولة
- دعم اللغة العربية بالكامل

## الصيانة
- كود منظم ومعلق
- فصل الاهتمامات
- سهولة إضافة ميزات جديدة
- نظام معالجة الأخطاء

---

**تم إنجاز تنظيم الكود بالكامل ✅**

الموقع جاهز للاستخدام على: http://localhost:5000
لوحة الإدارة متاحة على: http://localhost:5000/admin